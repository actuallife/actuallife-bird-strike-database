<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>åŸå¸‚é£›ç¾½ Â· é³¥çª—æ®ºé˜²æ²»è³‡æ–™åº«</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&family=Noto+Sans+TC:wght@300;400;500&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --sky: #e8f4f8;
        --dusk: #2c4a6e;
        --dawn: #f0a05a;
        --leaf: #3d7a5e;
        --mist: #8ab4c4;
        --night: #1a2d3f;
        --paper: #faf7f2;
        --ink: #2a2a2a;
        --danger: #c0392b;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: 'Noto Sans TC', sans-serif;
        background: var(--paper);
        color: var(--ink);
        overflow-x: hidden;
      }

      /* NAV */
      nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 100;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 2.5rem;
        background: rgba(250, 247, 242, 0.93);
        backdrop-filter: blur(12px);
        border-bottom: 1px solid rgba(44, 74, 110, 0.1);
      }
      .nav-brand {
        font-family: 'Noto Serif TC', serif;
        font-size: 1.05rem;
        font-weight: 700;
        color: var(--dusk);
      }
      .nav-brand span {
        color: var(--dawn);
      }
      .nav-links {
        display: flex;
        gap: 2rem;
        list-style: none;
      }
      .nav-links a {
        text-decoration: none;
        color: var(--dusk);
        font-size: 0.88rem;
        font-weight: 500;
        transition: color 0.2s;
      }
      .nav-links a:hover {
        color: var(--dawn);
      }

      /* HERO */
      .hero {
        min-height: 100vh;
        background: linear-gradient(
          160deg,
          var(--night) 0%,
          var(--dusk) 55%,
          #3a6b8a 100%
        );
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 6rem 2rem 4rem;
        position: relative;
        overflow: hidden;
      }
      .hero::before {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(
            ellipse at 20% 50%,
            rgba(240, 160, 90, 0.12) 0%,
            transparent 60%
          ),
          radial-gradient(
            ellipse at 80% 20%,
            rgba(61, 122, 94, 0.15) 0%,
            transparent 50%
          );
      }
      .hero-bird {
        font-size: 5rem;
        margin-bottom: 1.5rem;
        animation: float 4s ease-in-out infinite;
        filter: drop-shadow(0 0 30px rgba(240, 160, 90, 0.4));
        position: relative;
      }
      @keyframes float {
        0%,
        100% {
          transform: translateY(0) rotate(-3deg);
        }
        50% {
          transform: translateY(-18px) rotate(3deg);
        }
      }
      .hero h1 {
        font-family: 'Noto Serif TC', serif;
        font-size: clamp(2.2rem, 6vw, 4rem);
        font-weight: 700;
        color: #fff;
        line-height: 1.35;
        margin-bottom: 1rem;
        position: relative;
      }
      .hero h1 em {
        color: var(--dawn);
        font-style: normal;
      }
      .hero-sub {
        font-size: 1rem;
        color: rgba(255, 255, 255, 0.7);
        max-width: 540px;
        line-height: 1.9;
        margin-bottom: 2rem;
        position: relative;
      }
      .hero-team {
        font-family: 'Space Mono', monospace;
        font-size: 0.72rem;
        color: rgba(255, 255, 255, 0.4);
        letter-spacing: 0.12em;
        margin-bottom: 2.5rem;
        position: relative;
      }
      .hero-cta {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        justify-content: center;
        position: relative;
      }
      .btn {
        padding: 0.85rem 2rem;
        border-radius: 50px;
        font-size: 0.92rem;
        font-weight: 500;
        cursor: pointer;
        border: none;
        transition: all 0.25s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-family: 'Noto Sans TC', sans-serif;
      }
      .btn-primary {
        background: var(--dawn);
        color: var(--night);
        box-shadow: 0 4px 20px rgba(240, 160, 90, 0.35);
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(240, 160, 90, 0.5);
      }
      .btn-outline {
        background: transparent;
        color: #fff;
        border: 1.5px solid rgba(255, 255, 255, 0.4);
      }
      .btn-outline:hover {
        background: rgba(255, 255, 255, 0.1);
      }
      .scroll-hint {
        position: absolute;
        bottom: 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.4rem;
        color: rgba(255, 255, 255, 0.3);
        font-size: 0.72rem;
      }
      .scroll-arrow {
        animation: bounce 2s infinite;
      }
      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(6px);
        }
      }

      /* STATS */
      .stats-bar {
        background: var(--dusk);
        padding: 2.5rem 2rem;
        display: flex;
        justify-content: center;
        gap: 4rem;
        flex-wrap: wrap;
      }
      .stat-item {
        text-align: center;
      }
      .stat-num {
        font-family: 'Space Mono', monospace;
        font-size: 2.2rem;
        font-weight: 700;
        color: var(--dawn);
        display: block;
      }
      .stat-label {
        font-size: 0.78rem;
        color: rgba(255, 255, 255, 0.55);
        letter-spacing: 0.05em;
      }

      /* SECTIONS */
      section {
        padding: 5rem 2rem;
      }
      .section-wrap {
        max-width: 1000px;
        margin: 0 auto;
      }
      .section-tag {
        font-family: 'Space Mono', monospace;
        font-size: 0.7rem;
        letter-spacing: 0.15em;
        color: var(--mist);
        text-transform: uppercase;
        margin-bottom: 0.75rem;
      }
      .section-title {
        font-family: 'Noto Serif TC', serif;
        font-size: clamp(1.6rem, 4vw, 2.4rem);
        font-weight: 700;
        color: var(--dusk);
        margin-bottom: 1.5rem;
        line-height: 1.4;
      }
      .section-desc {
        font-size: 0.97rem;
        color: #555;
        line-height: 1.9;
        max-width: 680px;
      }

      /* INFO CARDS */
      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 1.5rem;
        margin-top: 3rem;
      }
      .info-card {
        background: #fff;
        border-radius: 16px;
        padding: 2rem;
        border: 1px solid rgba(44, 74, 110, 0.08);
        box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04);
        transition: transform 0.2s, box-shadow 0.2s;
      }
      .info-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      }
      .info-card-icon {
        font-size: 2rem;
        margin-bottom: 1rem;
      }
      .info-card h3 {
        font-family: 'Noto Serif TC', serif;
        font-size: 1.02rem;
        color: var(--dusk);
        margin-bottom: 0.75rem;
      }
      .info-card p {
        font-size: 0.87rem;
        color: #666;
        line-height: 1.8;
      }

      /* FORM */
      #report {
        background: linear-gradient(135deg, #f0f6fa 0%, var(--paper) 100%);
      }
      .form-card {
        background: #fff;
        border-radius: 24px;
        padding: 3rem;
        margin-top: 3rem;
        box-shadow: 0 4px 40px rgba(44, 74, 110, 0.1);
        border: 1px solid rgba(44, 74, 110, 0.08);
      }
      .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
      }
      .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }
      .form-group.full {
        grid-column: 1 / -1;
      }
      label {
        font-size: 0.85rem;
        font-weight: 500;
        color: var(--dusk);
        letter-spacing: 0.02em;
      }
      label .req {
        color: var(--danger);
      }
      input,
      select,
      textarea {
        padding: 0.75rem 1rem;
        border-radius: 10px;
        border: 1.5px solid #dde5ec;
        font-family: 'Noto Sans TC', sans-serif;
        font-size: 0.9rem;
        color: var(--ink);
        background: #fafcfe;
        transition: border-color 0.2s, box-shadow 0.2s;
        outline: none;
      }
      input:focus,
      select:focus,
      textarea:focus {
        border-color: var(--mist);
        box-shadow: 0 0 0 3px rgba(138, 180, 196, 0.2);
      }
      textarea {
        resize: vertical;
        min-height: 100px;
      }

      /* PHOTO UPLOAD */
      .photo-upload {
        border: 2px dashed #ccd8e3;
        border-radius: 12px;
        padding: 2.5rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s;
        background: #f7fafc;
        position: relative;
      }
      .photo-upload:hover {
        border-color: var(--mist);
        background: #eef5f9;
      }
      .photo-upload input[type='file'] {
        position: absolute;
        inset: 0;
        opacity: 0;
        cursor: pointer;
        border: none;
        background: none;
        padding: 0;
        width: 100%;
        height: 100%;
      }
      .photo-upload-icon {
        font-size: 2.5rem;
        margin-bottom: 0.75rem;
      }
      .photo-upload p {
        font-size: 0.87rem;
        color: #888;
      }
      .photo-upload strong {
        color: var(--dusk);
      }
      #preview-container {
        margin-top: 1rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 0.75rem;
      }
      #preview-container img {
        width: 100%;
        height: 100px;
        object-fit: cover;
        border-radius: 8px;
        border: 1px solid #dde5ec;
      }

      /* GPS */
      .gps-row {
        display: flex;
        gap: 1rem;
        align-items: flex-end;
      }
      .gps-row input {
        flex: 1;
      }
      .btn-sm {
        padding: 0.75rem 1.2rem;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 0.84rem;
        white-space: nowrap;
        transition: background 0.2s;
        font-family: 'Noto Sans TC', sans-serif;
        color: #fff;
      }
      .btn-green {
        background: var(--leaf);
      }
      .btn-green:hover {
        background: #2d5f48;
      }
      .btn-blue {
        background: var(--mist);
      }
      .btn-blue:hover {
        background: #6a9ab0;
      }
      .btn-gray {
        background: #aaa;
      }
      .btn-gray:hover {
        background: #888;
      }

      /* AI */
      .ai-row {
        display: flex;
        gap: 0.75rem;
        align-items: center;
        flex-wrap: wrap;
        margin-bottom: 0.5rem;
      }
      .method-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 500;
      }
      .ai-loading {
        display: none;
        align-items: center;
        gap: 0.6rem;
        color: var(--mist);
        font-size: 0.85rem;
        margin-top: 0.4rem;
      }
      .ai-loading.show {
        display: flex;
      }
      .spinner {
        width: 16px;
        height: 16px;
        border: 2px solid var(--mist);
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      .ai-result {
        background: linear-gradient(135deg, #eaf5ee, #e8f4f8);
        border: 1px solid #b8dcc8;
        border-radius: 10px;
        padding: 0.85rem 1.1rem;
        font-size: 0.87rem;
        color: var(--leaf);
        display: none;
        margin-top: 0.4rem;
      }
      .ai-result.show {
        display: block;
      }

      /* SUBMIT */
      .form-submit {
        margin-top: 2rem;
        text-align: center;
      }
      .btn-submit {
        padding: 1rem 3rem;
        background: var(--dusk);
        color: #fff;
        border: none;
        border-radius: 50px;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.25s;
        font-family: 'Noto Sans TC', sans-serif;
        box-shadow: 0 4px 20px rgba(44, 74, 110, 0.25);
      }
      .btn-submit:hover {
        background: var(--night);
        transform: translateY(-2px);
      }
      .btn-submit:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      /* TABLE */
      #data {
        background: var(--paper);
      }
      .data-controls {
        display: flex;
        gap: 1rem;
        align-items: center;
        flex-wrap: wrap;
        margin-bottom: 1.5rem;
        margin-top: 2rem;
      }
      .data-controls input {
        flex: 1;
        min-width: 200px;
      }
      .table-wrap {
        overflow-x: auto;
        border-radius: 16px;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.06);
        border: 1px solid rgba(44, 74, 110, 0.08);
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      thead {
        background: var(--dusk);
      }
      thead th {
        padding: 1rem 1.25rem;
        text-align: left;
        font-size: 0.8rem;
        font-weight: 500;
        color: rgba(255, 255, 255, 0.85);
        letter-spacing: 0.04em;
      }
      tbody tr {
        border-bottom: 1px solid #eaecef;
        transition: background 0.15s;
      }
      tbody tr:hover {
        background: #f5f9fc;
      }
      tbody tr:last-child {
        border-bottom: none;
      }
      td {
        padding: 0.9rem 1.25rem;
        font-size: 0.87rem;
        color: var(--ink);
        vertical-align: middle;
      }
      .tag {
        display: inline-block;
        padding: 0.2rem 0.6rem;
        border-radius: 20px;
        font-size: 0.73rem;
        background: #e8f4f8;
        color: var(--dusk);
      }
      .tag.ai {
        background: #eaf5ee;
        color: var(--leaf);
      }

      /* MAP */
      .map-placeholder {
        background: linear-gradient(135deg, #daeaf5, #c5dce7);
        border-radius: 16px;
        height: 300px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 1rem;
        color: var(--dusk);
        margin-top: 2rem;
        border: 1px dashed var(--mist);
      }

      /* TOAST */
      .toast {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        z-index: 200;
        padding: 1rem 1.5rem;
        border-radius: 12px;
        font-size: 0.9rem;
        font-weight: 500;
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s;
        max-width: 320px;
      }
      .toast.show {
        transform: translateY(0);
        opacity: 1;
      }
      .toast.success {
        background: var(--leaf);
        color: #fff;
      }
      .toast.error {
        background: var(--danger);
        color: #fff;
      }

      /* FOOTER */
      footer {
        background: var(--night);
        color: rgba(255, 255, 255, 0.6);
        padding: 3rem 2rem;
        text-align: center;
      }
      .footer-brand {
        font-family: 'Noto Serif TC', serif;
        font-size: 1.15rem;
        color: #fff;
        margin-bottom: 0.75rem;
      }
      footer p {
        font-size: 0.82rem;
        line-height: 1.8;
      }
      .footer-team {
        font-family: 'Space Mono', monospace;
        font-size: 0.7rem;
        color: var(--dawn);
        margin-top: 1.5rem;
        letter-spacing: 0.1em;
      }

      @media (max-width: 640px) {
        nav {
          padding: 1rem;
        }
        .nav-links {
          display: none;
        }
        .form-grid {
          grid-template-columns: 1fr;
        }
        .form-card {
          padding: 1.5rem;
        }
        .gps-row {
          flex-direction: column;
        }
        .stats-bar {
          gap: 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="nav-brand">åŸå¸‚é£›ç¾½ <span>Â·</span> é³¥çª—æ®ºé˜²æ²»</div>
      <ul class="nav-links">
        <li><a href="#about">é—œæ–¼çª—æ®º</a></li>
        <li><a href="#report">é€šå ±äº‹ä»¶</a></li>
        <li><a href="#data">è³‡æ–™åº«</a></li>
        <li><a href="#map">åœ°åœ–</a></li>
      </ul>
    </nav>

    <section class="hero">
      <div class="hero-bird">ğŸ¦…</div>
      <h1>æ¯ä¸€æ‰‡çª—<br />éƒ½å¯èƒ½æ˜¯<em>æœ€å¾Œçš„é£›ç¿”</em></h1>
      <p class="hero-sub">
        é³¥é¡æ’ç»ç’ƒæ˜¯åŸå¸‚ä¸­è¢«åš´é‡å¿½è¦–çš„ç”Ÿæ…‹å¨è„…ã€‚é€éç³»çµ±æ€§çš„è³‡æ–™æ”¶é›†ï¼Œæˆ‘å€‘æ”œæ‰‹å®ˆè­·æ¯ä¸€éš»å¤©ç©ºçš„ç”Ÿå‘½ã€‚
      </p>
      <div class="hero-team">è’é‡å®œè˜­è¦ªå­åœ˜ä¸€åœ˜ â€” åŸå¸‚é£›ç¾½</div>
      <div class="hero-cta">
        <a href="#report" class="btn btn-primary">ğŸ“¸ é€šå ±çª—æ®ºäº‹ä»¶</a>
        <a href="#data" class="btn btn-outline">ğŸ“Š æŸ¥çœ‹è³‡æ–™åº«</a>
      </div>
      <div class="scroll-hint">
        <span>å‘ä¸‹æ¢ç´¢</span>
        <span class="scroll-arrow">â†“</span>
      </div>
    </section>

    <div class="stats-bar">
      <div class="stat-item">
        <span class="stat-num" id="stat-total">â€”</span
        ><span class="stat-label">ç´¯è¨ˆé€šå ±ä»¶æ•¸</span>
      </div>
      <div class="stat-item">
        <span class="stat-num" id="stat-species">â€”</span
        ><span class="stat-label">è¨˜éŒ„é³¥ç¨®æ•¸</span>
      </div>
      <div class="stat-item">
        <span class="stat-num" id="stat-locations">â€”</span
        ><span class="stat-label">äº‹ç™¼åœ°é»æ•¸</span>
      </div>
      <div class="stat-item">
        <span class="stat-num">10å„„+</span
        ><span class="stat-label">å…¨çƒå¹´ä¼°è¨ˆæ­»äº¡ï¼ˆéš»ï¼‰</span>
      </div>
    </div>

    <section id="about">
      <div class="section-wrap">
        <p class="section-tag">äº†è§£å•é¡Œ</p>
        <h2 class="section-title">ä»€éº¼æ˜¯é³¥çª—æ®ºï¼Ÿ</h2>
        <p class="section-desc">
          é³¥çª—æ®ºï¼ˆBird-Window
          Strikeï¼‰æ˜¯æŒ‡é³¥é¡é£›è¡Œæ™‚æ’æ“Šå»ºç¯‰ç‰©ç»ç’ƒçª—è€Œå—å‚·æˆ–æ­»äº¡çš„ç¾è±¡ã€‚ç»ç’ƒåå°„å¤©ç©ºèˆ‡æ¤ç‰©ï¼Œè®“é³¥é¡èª¤ä»¥ç‚ºæ˜¯å¯ä»¥é£›è¶Šçš„ç©ºé–“ï¼Œå…¨çƒæ¯å¹´ä¼°è¨ˆæœ‰10å„„è‡³40å„„éš»é³¥å› æ­¤å–ªå‘½ï¼Œæ˜¯åƒ…æ¬¡æ–¼æ£²åœ°ç ´å£çš„ç¬¬äºŒå¤§äººç‚ºè‡´é³¥æ­»å› ã€‚
        </p>
        <div class="info-grid">
          <div class="info-card">
            <div class="info-card-icon">ğŸ™ï¸</div>
            <h3>åŸå¸‚æ˜¯é«˜é¢¨éšªå€åŸŸ</h3>
            <p>
              é«˜åº¦é€æ˜æˆ–åå…‰çš„å»ºç¯‰ç»ç’ƒï¼Œåœ¨é³¥é¡é·å¾™å­£ç¯€æ ¼å¤–å±éšªï¼Œå°¤å…¶æ¸…æ™¨èˆ‡é»ƒæ˜å…‰ç·šä½è§’åº¦æ™‚ã€‚
            </p>
          </div>
          <div class="info-card">
            <div class="info-card-icon">ğŸ¦œ</div>
            <h3>é·å¾™é³¥æœ€å—å¨è„…</h3>
            <p>
              å°ç£ä½æ–¼æ±äºå€™é³¥é·å¾™è·¯ç·šä¸Šï¼Œæ˜¥ç§‹å…©å­£ç‚ºé«˜å³°æœŸã€‚ç–²æ†Šçš„å€™é³¥åˆ¤æ–·åŠ›ä¸‹é™ï¼Œæ’çª—é¢¨éšªå€å¢ã€‚
            </p>
          </div>
          <div class="info-card">
            <div class="info-card-icon">ğŸ”</div>
            <h3>è³‡æ–™åš´é‡ä¸è¶³</h3>
            <p>
              å°ç£ç¼ºä¹ç³»çµ±æ€§çš„é³¥çª—æ®ºèª¿æŸ¥è³‡æ–™ï¼Œå…¬æ°‘ç§‘å­¸æ˜¯å¡«è£œçŸ¥è­˜ç©ºç™½ã€æ¨å‹•æ”¿ç­–æ”¹è®Šçš„é‡è¦åŠ›é‡ã€‚
            </p>
          </div>
          <div class="info-card">
            <div class="info-card-icon">ğŸ›¡ï¸</div>
            <h3>é é˜²æ˜¯å¯è¡Œçš„</h3>
            <p>
              åœ¨ç»ç’ƒåŠ è²¼é˜²æ’è²¼ç´™ã€ä½¿ç”¨çƒå¡é³¥å‹ç»ç’ƒã€å¤–åŠ ç·©è¡ç¶²ï¼Œéƒ½å¯å¤§å¹…é™ä½é³¥çª—æ®ºç™¼ç”Ÿç‡ã€‚
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="report">
      <div class="section-wrap">
        <p class="section-tag">å…¬æ°‘ç§‘å­¸é€šå ±</p>
        <h2 class="section-title">é€šå ±é³¥çª—æ®ºäº‹ä»¶</h2>
        <p class="section-desc">
          ç™¼ç¾é³¥é¡æ’çª—äº‹ä»¶ï¼Ÿè«‹å¡«å¯«ä»¥ä¸‹è¡¨å–®ï¼Œæ‚¨çš„ç´€éŒ„å°‡æˆç‚ºä¿è­·é³¥é¡çš„é‡è¦è³‡æ–™ã€‚
        </p>
        <div class="form-card">
          <form id="reportForm" novalidate>
            <div class="form-group full" style="margin-bottom: 1.5rem">
              <label>äº‹ä»¶ç…§ç‰‡</label>
              <div class="photo-upload" id="photoZone">
                <input type="file" id="photoInput" accept="image/*" multiple />
                <div class="photo-upload-icon">ğŸ“·</div>
                <p><strong>é»æ“Šä¸Šå‚³</strong>æˆ–æ‹–æ›³ç…§ç‰‡è‡³æ­¤</p>
                <p style="margin-top: 0.3rem">æ”¯æ´ JPGã€PNGã€HEICï¼Œå¯å¤šå¼µ</p>
              </div>
              <div id="preview-container"></div>
            </div>

            <div class="form-grid">
              <div class="form-group full">
                <label>äº‹ç™¼ä½ç½® <span class="req">*</span></label>
                <div class="gps-row">
                  <input
                    type="text"
                    id="location"
                    placeholder="åœ°å€æˆ–åœ°é»æè¿°ï¼ˆå¦‚ï¼šå®œè˜­å¸‚â—‹â—‹è·¯â—‹è™Ÿï¼‰"
                    required
                  />
                  <button
                    type="button"
                    class="btn-sm btn-green"
                    onclick="getGPS()"
                  >
                    ğŸ“ è‡ªå‹•æŠ“å– GPS
                  </button>
                </div>
                <input type="hidden" id="lat" />
                <input type="hidden" id="lng" />
                <small
                  id="gpsStatus"
                  style="
                    color: var(--mist);
                    font-size: 0.78rem;
                    margin-top: 0.3rem;
                    display: block;
                  "
                ></small>
              </div>

              <div class="form-group">
                <label>äº‹ä»¶æ™‚é–“ <span class="req">*</span></label>
                <input type="datetime-local" id="eventTime" required />
              </div>

              <div class="form-group">
                <label>çª—æ®ºé¡å‹ <span class="req">*</span></label>
                <select id="strikeType" required>
                  <option value="">è«‹é¸æ“‡</option>
                  <option>æ’æ“Šå¾Œæ­»äº¡</option>
                  <option>æ’æ“Šå¾Œæ˜è¿·</option>
                  <option>æ’æ“Šå¾Œå—å‚·é£›é›¢</option>
                  <option>æ’æ“Šå¾Œæ¢å¾©é£›é›¢</option>
                  <option>åƒ…ç™¼ç¾ç¾½æ¯›ï¼ç—•è·¡</option>
                  <option>å…¶ä»–</option>
                </select>
              </div>

              <div class="form-group full">
                <label>é³¥é¡åç¨± <span class="req">*</span></label>
                <div class="ai-row">
                  <span
                    class="method-badge"
                    id="methodBadge"
                    style="background: #eaf5ee; color: var(--leaf)"
                    >ğŸ¤– AIè¾¨è­˜</span
                  >
                  <button
                    type="button"
                    class="btn-sm btn-blue"
                    onclick="triggerAI()"
                  >
                    ä½¿ç”¨ AI è¾¨è­˜
                  </button>
                  <span style="font-size: 0.8rem; color: #bbb">æˆ–</span>
                  <button
                    type="button"
                    class="btn-sm btn-gray"
                    onclick="switchManual()"
                  >
                    æ‰‹å‹•è¼¸å…¥
                  </button>
                </div>
                <div class="ai-loading" id="aiLoading">
                  <div class="spinner"></div>
                  AIè¾¨è­˜ä¸­ï¼Œè«‹ç¨å€™ï¼ˆæœ€å¤š15ç§’ï¼‰...
                </div>
                <div class="ai-result" id="aiResult"></div>
                <input
                  type="text"
                  id="birdSpecies"
                  placeholder="é³¥é¡ä¸­æ–‡æˆ–è‹±æ–‡åç¨±"
                  required
                  style="margin-top: 0.5rem"
                />
                <input type="hidden" id="identMethod" value="AI" />
              </div>

              <div class="form-group">
                <label>å»ºç¯‰ç‰©é¡å‹</label>
                <select id="buildingType">
                  <option value="">è«‹é¸æ“‡</option>
                  <option>ä½å®…</option>
                  <option>è¾¦å…¬å¤§æ¨“</option>
                  <option>å­¸æ ¡</option>
                  <option>å•†å ´</option>
                  <option>å…¬å…±å»ºè¨­</option>
                  <option>å…¶ä»–</option>
                </select>
              </div>

              <div class="form-group">
                <label>ç»ç’ƒç‰¹æ€§</label>
                <select id="glassType">
                  <option value="">è«‹é¸æ“‡</option>
                  <option>é€æ˜ç»ç’ƒ</option>
                  <option>åå…‰ç»ç’ƒ</option>
                  <option>ç£¨ç ‚ç»ç’ƒ</option>
                  <option>æœ‰é˜²æ’è²¼ç´™</option>
                  <option>ä¸æ˜</option>
                </select>
              </div>

              <div class="form-group">
                <label>ç•¶æ™‚å¤©æ°£</label>
                <select id="weather">
                  <option value="">è«‹é¸æ“‡</option>
                  <option>æ™´å¤©</option>
                  <option>å¤šé›²</option>
                  <option>é™°å¤©</option>
                  <option>é›¨å¤©</option>
                  <option>éœ§</option>
                </select>
              </div>

              <div class="form-group">
                <label>é€šå ±è€…ï¼ˆé¸å¡«ï¼‰</label>
                <input type="text" id="reporter" placeholder="æ‚¨çš„å§“åæˆ–åŒ¿å" />
              </div>

              <div class="form-group full">
                <label>å…¶ä»–å‚™è¨»</label>
                <textarea
                  id="notes"
                  placeholder="å…¶ä»–è§€å¯Ÿç´°ç¯€ã€ç¾å ´ç‹€æ³ç­‰..."
                ></textarea>
              </div>
            </div>

            <div class="form-submit">
              <button type="submit" class="btn-submit" id="submitBtn">
                ğŸ•Šï¸ æäº¤é€šå ±
              </button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <section id="data">
      <div class="section-wrap">
        <p class="section-tag">é–‹æ”¾è³‡æ–™</p>
        <h2 class="section-title">é€šå ±è³‡æ–™åº«</h2>
        <p class="section-desc">
          æ‰€æœ‰é€šå ±è³‡æ–™å°‡åœ¨å»é™¤å€‹äººè³‡è¨Šå¾Œå…¬é–‹ï¼Œä¾›ç ”ç©¶èˆ‡æ•™è‚²ä½¿ç”¨ã€‚
        </p>
        <div class="data-controls">
          <input
            type="text"
            id="searchInput"
            placeholder="ğŸ” æœå°‹é³¥ç¨®ã€åœ°é»..."
            oninput="filterTable()"
          />
          <select
            id="filterType"
            onchange="filterTable()"
            style="max-width: 180px"
          >
            <option value="">å…¨éƒ¨é¡å‹</option>
            <option>æ’æ“Šå¾Œæ­»äº¡</option>
            <option>æ’æ“Šå¾Œæ˜è¿·</option>
            <option>æ’æ“Šå¾Œå—å‚·é£›é›¢</option>
            <option>æ’æ“Šå¾Œæ¢å¾©é£›é›¢</option>
          </select>
          <button class="btn-sm btn-green" onclick="loadRecords()">
            ğŸ”„ é‡æ–°è¼‰å…¥
          </button>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>æ™‚é–“</th>
                <th>é³¥ç¨®</th>
                <th>è¾¨è­˜æ–¹å¼</th>
                <th>åœ°é»</th>
                <th>é¡å‹</th>
                <th>å¤©æ°£</th>
              </tr>
            </thead>
            <tbody id="tableBody">
              <tr>
                <td
                  colspan="7"
                  style="text-align: center; padding: 3rem; color: #bbb"
                >
                  è¼‰å…¥ä¸­...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="map">
      <div class="section-wrap">
        <p class="section-tag">ç©ºé–“åˆ†ä½ˆ</p>
        <h2 class="section-title">äº‹ä»¶åœ°åœ–</h2>
        <p class="section-desc">
          æ•´åˆå„é€šå ±åœ°é»çš„åœ°ç†è³‡è¨Šï¼Œæ‰¾å‡ºé³¥çª—æ®ºç†±é»ï¼Œå”åŠ©å„ªå…ˆæ¨å‹•é˜²æ²»æªæ–½ã€‚
        </p>
        <div class="map-placeholder">
          <span style="font-size: 2.5rem">ğŸ—ºï¸</span>
          <p style="text-align: center">
            åœ°åœ–æ•´åˆä¸­<br /><small>ä¸²æ¥ Supabase åœ°ç†è³‡æ–™å¾Œå³è‡ªå‹•é¡¯ç¤º</small>
          </p>
        </div>
      </div>
    </section>

    <footer>
      <div class="footer-brand">åŸå¸‚é£›ç¾½ Â· é³¥çª—æ®ºé˜²æ²»è³‡æ–™åº«</div>
      <p>
        é€™å€‹å¹³å°ç”±ä¸€ç¾¤é—œå¿ƒç”Ÿæ…‹çš„å…¬æ°‘å…±åŒå»ºç«‹<br />æ¯ä¸€ç­†è³‡æ–™ï¼Œéƒ½æ˜¯å®ˆè­·ç”Ÿå‘½çš„è¡Œå‹•
      </p>
      <div class="footer-team">è£½ä½œåœ˜éšŠï¼šè’é‡å®œè˜­è¦ªå­åœ˜ä¸€åœ˜ â€” åŸå¸‚é£›ç¾½</div>
    </footer>

    <div class="toast" id="toast"></div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      //  âš™ï¸ è«‹å¡«å…¥ä½ çš„é‡‘é‘°
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const SUPABASE_URL = 'https://piqeztwpvxzcdccxtrrn.supabase.co';
      const SUPABASE_KEY =
        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpcWV6dHdwdnh6Y2RjY3h0cnJuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE1MzQ0MDUsImV4cCI6MjA4NzExMDQwNX0.ybvQlMeyhuWPd_YHjvBI6U9QrNCFGAs10k_AbLvG5BI';
      const GEMINI_KEY = 'AIzaSyDkcAdEf_qAXK6sdhu5Muu-o7TG7DQ_3-Y';
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      const sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

      // é è¨­æ™‚é–“ç‚ºç¾åœ¨
      document.getElementById('eventTime').value = new Date(
        Date.now() - new Date().getTimezoneOffset() * 60000
      )
        .toISOString()
        .slice(0, 16);

      // â”€â”€ GPS â”€â”€
      function getGPS() {
        const status = document.getElementById('gpsStatus');
        if (!navigator.geolocation) {
          status.textContent = 'æ­¤è£ç½®ä¸æ”¯æ´GPS';
          return;
        }
        status.textContent = 'â³ å®šä½ä¸­...';
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            const { latitude: lat, longitude: lng } = pos.coords;
            document.getElementById('lat').value = lat.toFixed(6);
            document.getElementById('lng').value = lng.toFixed(6);
            if (!document.getElementById('location').value)
              document.getElementById('location').value = `${lat.toFixed(
                5
              )}, ${lng.toFixed(5)}`;
            status.textContent = `âœ… GPS å·²å–å¾—ï¼š${lat.toFixed(
              5
            )}, ${lng.toFixed(5)}`;
          },
          (err) => {
            status.textContent = 'âš ï¸ å®šä½å¤±æ•—ï¼š' + err.message;
          }
        );
      }

      // â”€â”€ ç…§ç‰‡é è¦½ â”€â”€
      document.getElementById('photoInput').addEventListener('change', (e) => {
        const files = Array.from(e.target.files);
        const container = document.getElementById('preview-container');
        container.innerHTML = '';
        files.forEach((f) => {
          const img = document.createElement('img');
          img.src = URL.createObjectURL(f);
          container.appendChild(img);
        });
      });

      // â”€â”€ AI è¾¨è­˜ â”€â”€
      let aiController = null;

      async function triggerAI() {
  const files = document.getElementById('photoInput').files;
  if (!files.length) { showToast('è«‹å…ˆä¸Šå‚³ç…§ç‰‡å†ä½¿ç”¨ AI è¾¨è­˜', 'error'); return; }

  const loading = document.getElementById('aiLoading');
  const result  = document.getElementById('aiResult');
  result.classList.remove('show');
  loading.classList.add('show');
  loading.innerHTML = '<div class="spinner"></div> <span id="aiCountdown">AI è¾¨è­˜ä¸­ï¼Œå‰©é¤˜ 15 ç§’...</span>';
  setMethod('AI');

  // å€’æ•¸è¨ˆæ™‚é¡¯ç¤º
  let remaining = 15;
  const countdownEl = () => document.getElementById('aiCountdown');
  const countdownTimer = setInterval(() => {
    remaining--;
    if (countdownEl()) countdownEl().textContent = `AI è¾¨è­˜ä¸­ï¼Œå‰©é¤˜ ${remaining} ç§’...`;
  }, 1000);

  aiController = new AbortController();
  let isTimeout = false;

  const timeout = setTimeout(() => {
    isTimeout = true;
    aiController.abort();
    clearInterval(countdownTimer);
    loading.classList.remove('show');
    result.innerHTML = `
      âš ï¸ <strong>AI è¾¨è­˜é€¾æ™‚ï¼ˆè¶…é15ç§’ï¼‰</strong><br/>
      <small style="color:#888">å¯èƒ½åŸå› ï¼šåœ–ç‰‡æª”æ¡ˆå¤ªå¤§ã€ç¶²è·¯é€Ÿåº¦è¼ƒæ…¢ã€æˆ– Gemini ä¼ºæœå™¨ç¹å¿™ã€‚<br/>
      å»ºè­°ï¼šå£“ç¸®ç…§ç‰‡å¾Œå†è©¦ï¼Œæˆ–ç›´æ¥æ‰‹å‹•è¼¸å…¥é³¥é¡åç¨±ã€‚</small>`;
    result.style.color = '#e67e22';
    result.classList.add('show');
    setMethod('æ‰‹å‹•');
  }, 15000);

  try {
    const file = files[0];

    // æª¢æŸ¥æª”æ¡ˆå¤§å°
    if (file.size > 10 * 1024 * 1024) {
      clearTimeout(timeout);
      clearInterval(countdownTimer);
      loading.classList.remove('show');
      result.innerHTML = `âš ï¸ <strong>ç…§ç‰‡æª”æ¡ˆéå¤§ï¼ˆè¶…é10MBï¼‰</strong><br/><small style="color:#888">è«‹å£“ç¸®ç…§ç‰‡å¾Œå†è©¦ï¼Œå»ºè­°æª”æ¡ˆå°æ–¼5MBã€‚</small>`;
      result.style.color = '#e67e22';
      result.classList.add('show');
      setMethod('æ‰‹å‹•');
      return;
    }

    const b64 = await toBase64(file);
    const mime = file.type || 'image/jpeg';

    const res = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_KEY}`,
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ contents: [{ parts: [
          { inline_data: { mime_type: mime, data: b64 } },
          { text: 'è«‹è¾¨è­˜é€™å¼µç…§ç‰‡ä¸­çš„é³¥é¡ï¼Œåªå›ç­”é³¥é¡ä¸­æ–‡åç¨±ï¼Œè‹¥ç„¡æ³•è¾¨è­˜è«‹å›ç­”ã€Œç„¡æ³•è¾¨è­˜ã€ã€‚' }
        ]}]}),
        signal: aiController.signal
      }
    );

    clearTimeout(timeout);
    clearInterval(countdownTimer);
    loading.classList.remove('show');

    // HTTP éŒ¯èª¤è™•ç†
    if (!res.ok) {
      const errData = await res.json().catch(() => ({}));
      const errMsg = errData?.error?.message || `HTTP ${res.status}`;
      result.innerHTML = `
        âŒ <strong>AI è¾¨è­˜å¤±æ•—</strong><br/>
        <small style="color:#888">éŒ¯èª¤åŸå› ï¼š${errMsg}<br/>
        ${res.status === 400 ? 'è«‹ç¢ºèª Gemini API Key æ˜¯å¦æ­£ç¢ºå¡«å…¥ã€‚' : ''}
        ${res.status === 403 ? 'API Key å¯èƒ½ç„¡æ•ˆæˆ–æœªå•Ÿç”¨ Gemini APIã€‚' : ''}
        ${res.status === 429 ? 'å·²è¶…éå…è²»ä½¿ç”¨é¡åº¦ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚' : ''}
        </small>`;
      result.style.color = 'var(--danger)';
      result.classList.add('show');
      setMethod('æ‰‹å‹•');
      return;
    }

    const data = await res.json();
    const text = data?.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || 'ç„¡æ³•è¾¨è­˜';

    if (text === 'ç„¡æ³•è¾¨è­˜') {
      result.innerHTML = `ğŸ¤– <strong>AI ç„¡æ³•å¾ç…§ç‰‡è¾¨è­˜é³¥é¡</strong><br/><small style="color:#888">å¯èƒ½ç…§ç‰‡è§’åº¦ä¸æ¸…æ¥šæˆ–éé³¥é¡ç‰¹å¯«ï¼Œè«‹æ‰‹å‹•è¼¸å…¥é³¥é¡åç¨±ã€‚</small>`;
      result.style.color = '#888';
      result.classList.add('show');
      setMethod('æ‰‹å‹•');
    } else {
      document.getElementById('birdSpecies').value = text;
      result.innerHTML = `âœ… <strong>AI è¾¨è­˜æˆåŠŸï¼š${text}</strong><br/><small style="color:#888">è‹¥è¾¨è­˜çµæœæœ‰èª¤ï¼Œå¯ç›´æ¥ä¿®æ”¹ä¸‹æ–¹æ¬„ä½ã€‚</small>`;
      result.style.color = 'var(--leaf)';
      result.classList.add('show');
    }

  } catch (err) {
    clearTimeout(timeout);
    clearInterval(countdownTimer);
    loading.classList.remove('show');

    if (err.name === 'AbortError' && isTimeout) return; // é€¾æ™‚å·²è™•ç†

    result.innerHTML = `
      âŒ <strong>AI è¾¨è­˜ç™¼ç”ŸéŒ¯èª¤</strong><br/>
      <small style="color:#888">éŒ¯èª¤è¨Šæ¯ï¼š${err.message}<br/>
      è«‹ç¢ºèªç¶²è·¯é€£ç·šæ­£å¸¸ï¼Œæˆ–ç›´æ¥æ‰‹å‹•è¼¸å…¥é³¥é¡åç¨±ã€‚</small>`;
    result.style.color = 'var(--danger)';
    result.classList.add('show');
    setMethod('æ‰‹å‹•');
  }
}

      function switchManual() {
        setMethod('æ‰‹å‹•');
        document.getElementById('aiResult').classList.remove('show');
        document.getElementById('birdSpecies').focus();
      }

      function setMethod(mode) {
        document.getElementById('identMethod').value = mode;
        const b = document.getElementById('methodBadge');
        if (mode === 'AI') {
          b.textContent = 'ğŸ¤– AIè¾¨è­˜';
          b.style.background = '#eaf5ee';
          b.style.color = 'var(--leaf)';
        } else {
          b.textContent = 'âœï¸ æ‰‹å‹•è¼¸å…¥';
          b.style.background = '#f0eaff';
          b.style.color = '#6b4fa0';
        }
      }

      function toBase64(file) {
        return new Promise((res, rej) => {
          const r = new FileReader();
          r.onload = () => res(r.result.split(',')[1]);
          r.onerror = rej;
          r.readAsDataURL(file);
        });
      }

      // â”€â”€ æäº¤è¡¨å–® â”€â”€
      document
        .getElementById('reportForm')
        .addEventListener('submit', async (e) => {
          e.preventDefault();
          const btn = document.getElementById('submitBtn');
          btn.disabled = true;
          btn.textContent = 'æäº¤ä¸­...';

          try {
            // ä¸Šå‚³ç…§ç‰‡
            const files = Array.from(
              document.getElementById('photoInput').files
            );
            const photoUrls = [];
            for (const file of files) {
              const path = `strikes/${Date.now()}_${file.name.replace(
                /\s/g,
                '_'
              )}`;
              const { error } = await sb.storage
                .from('bird-photos')
                .upload(path, file);
              if (!error) {
                const { data } = sb.storage
                  .from('bird-photos')
                  .getPublicUrl(path);
                photoUrls.push(data.publicUrl);
              }
            }

            const { error } = await sb.from('bird_strikes').insert([
              {
                event_time: document.getElementById('eventTime').value,
                location: document.getElementById('location').value,
                latitude:
                  parseFloat(document.getElementById('lat').value) || null,
                longitude:
                  parseFloat(document.getElementById('lng').value) || null,
                strike_type: document.getElementById('strikeType').value,
                bird_species: document.getElementById('birdSpecies').value,
                ident_method: document.getElementById('identMethod').value,
                building_type: document.getElementById('buildingType').value,
                glass_type: document.getElementById('glassType').value,
                weather: document.getElementById('weather').value,
                reporter: document.getElementById('reporter').value,
                notes: document.getElementById('notes').value,
                photos: photoUrls,
              },
            ]);

            if (error) throw error;
            showToast('âœ… é€šå ±æˆåŠŸï¼æ„Ÿè¬æ‚¨çš„è²¢ç»', 'success');
            document.getElementById('reportForm').reset();
            document.getElementById('preview-container').innerHTML = '';
            document.getElementById('aiResult').classList.remove('show');
            document.getElementById('eventTime').value = new Date(
              Date.now() - new Date().getTimezoneOffset() * 60000
            )
              .toISOString()
              .slice(0, 16);
            loadRecords();
            updateStats();
          } catch (err) {
            showToast('âŒ æäº¤å¤±æ•—ï¼š' + err.message, 'error');
          } finally {
            btn.disabled = false;
            btn.textContent = 'ğŸ•Šï¸ æäº¤é€šå ±';
          }
        });

      // â”€â”€ è¼‰å…¥è³‡æ–™ â”€â”€
      let allRecords = [];
      async function loadRecords() {
        const { data, error } = await sb
          .from('bird_strikes')
          .select('*')
          .order('event_time', { ascending: false })
          .limit(200);
        if (!error && data) {
          allRecords = data;
          renderTable(data);
        } else
          document.getElementById('tableBody').innerHTML =
            '<tr><td colspan="7" style="text-align:center;padding:2.5rem;color:#bbb">å°šç„¡è³‡æ–™æˆ–ç„¡æ³•é€£ç·šè‡³è³‡æ–™åº«</td></tr>';
      }

      function renderTable(records) {
        const body = document.getElementById('tableBody');
        if (!records.length) {
          body.innerHTML =
            '<tr><td colspan="7" style="text-align:center;padding:2rem;color:#bbb">ç„¡ç¬¦åˆæ¢ä»¶çš„è³‡æ–™</td></tr>';
          return;
        }
        body.innerHTML = records
          .map(
            (r, i) => `
    <tr>
      <td>${i + 1}</td>
      <td>${
        r.event_time ? r.event_time.slice(0, 16).replace('T', ' ') : 'â€”'
      }</td>
      <td><strong>${r.bird_species || 'â€”'}</strong></td>
      <td><span class="tag ${r.ident_method === 'AI' ? 'ai' : ''}">${
              r.ident_method || 'â€”'
            }</span></td>
      <td>${r.location || 'â€”'}</td>
      <td>${r.strike_type || 'â€”'}</td>
      <td>${r.weather || 'â€”'}</td>
    </tr>`
          )
          .join('');
      }

      function filterTable() {
        const q = document.getElementById('searchInput').value.toLowerCase();
        const t = document.getElementById('filterType').value;
        renderTable(
          allRecords.filter(
            (r) =>
              (!q ||
                (r.bird_species || '').toLowerCase().includes(q) ||
                (r.location || '').toLowerCase().includes(q)) &&
              (!t || r.strike_type === t)
          )
        );
      }

      // â”€â”€ çµ±è¨ˆæ•¸å­— â”€â”€
      async function updateStats() {
        const { count: total } = await sb
          .from('bird_strikes')
          .select('*', { count: 'exact', head: true });
        const { data: sp } = await sb
          .from('bird_strikes')
          .select('bird_species')
          .not('bird_species', 'is', null);
        const { data: lc } = await sb
          .from('bird_strikes')
          .select('location')
          .not('location', 'is', null);
        animateNum('stat-total', total || 0);
        animateNum(
          'stat-species',
          new Set((sp || []).map((r) => r.bird_species)).size
        );
        animateNum(
          'stat-locations',
          new Set((lc || []).map((r) => r.location)).size
        );
      }

      function animateNum(id, target) {
        const el = document.getElementById(id);
        let cur = 0;
        const step = Math.max(1, Math.floor(target / 40));
        const t = setInterval(() => {
          cur = Math.min(cur + step, target);
          el.textContent = cur.toLocaleString();
          if (cur >= target) clearInterval(t);
        }, 30);
      }

      // â”€â”€ Toast â”€â”€
      function showToast(msg, type = 'success') {
        const t = document.getElementById('toast');
        t.textContent = msg;
        t.className = `toast ${type} show`;
        setTimeout(() => t.classList.remove('show'), 4000);
      }

      // åˆå§‹åŒ–
      loadRecords();
      updateStats();
    </script>
  </body>
</html>
